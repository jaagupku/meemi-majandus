logInWithFacebook=function(){FB.login(function(a){if(a.authResponse){window.location.href=location.protocol+"//"+location.hostname+"/login_fb_callback"}else{}},{scope:"email"});return false};unLinkFacebook=function(){$("#facebook").text("Loading...");$("#facebook").attr("onClick","");FB.getLoginStatus(function(a){if(a.status==="connected"){accessToken=a.authResponse.accessToken;FB.api("/me/permissions","DELETE",{access_token:accessToken},function(b){if(!b||b.error){alert("Error occured")}else{window.location.href=location.protocol+"//"+location.hostname+"/users/unlink_fb"}})}else{alert("Log in Facebook and try again.")}})};window.fbAsyncInit=function(){FB.init({appId:"1239529539502104",cookie:true,version:"v2.8"})};var loadFB=function(){(function(e,a,f){var c,b=e.getElementsByTagName(a)[0];if(e.getElementById(f)){return}c=e.createElement(a);c.id=f;c.src="//connect.facebook.net/en_US/sdk.js";b.parentNode.insertBefore(c,b)}(document,"script","facebook-jssdk"))};if(location.pathname==="/login"){loadFB()}else{$("#signuploginmodal").on("shown.bs.modal",loadFB())};